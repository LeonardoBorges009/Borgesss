<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Acesso à Câmera</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 20px;
        }
        #errorMsg {
            color: red;
        }
        video {
            width: 100%;
            max-width: 640px;
            height: auto;
            border: 1px solid black;
        }
    </style>
</head>
<body>
    <h1>Bem-vindo!</h1>
    <video autoplay playsinline></video>
    <div id="errorMsg"></div>

    <script>
        "use strict";

        // Coloca as variáveis no escopo global para torná-las disponíveis para o Console do navegador.
        var video = document.querySelector("video");
        var constraints = (window.constraints = {
            audio: false,
            video: true,
        });
        var errorElement = document.querySelector("#errorMsg");

        navigator.mediaDevices
            .getUser Media(constraints)
            .then(function (stream) {
                var videoTracks = stream.getVideoTracks();
                console.log("Got stream with constraints:", constraints);
                console.log("Using video device: " + videoTracks[0].label);
                stream.onremovetrack = function () {
                    console.log("Stream ended");
                };
                window.stream = stream; // torna as variáveis disponíveis para o Console do navegador
                video.srcObject = stream;
            })
            .catch(function (error) {
                if (error.name === "ConstraintNotSatisfiedError") {
                    errorMsg(
                        "A resolução " +
                        constraints.video.width.exact +
                        "x" +
                        constraints.video.width.exact +
                        " px não é suportada pelo seu dispositivo."
                    );
                } else if (error.name === "PermissionDeniedError") {
                    errorMsg(
                        "As permissões para usar sua câmera e microfone não foram fornecidas. " +
                        "Você precisa permitir o acesso da página aos seus dispositivos para " +
                        "que a demo funcione."
                    );
                }
                errorMsg("getUser Media error: " + error.name, error);
            });

        function errorMsg(msg, error) {
            errorElement.innerHTML += "<p>" + msg + "</p>";
            if (typeof error !== "undefined") {
                console.error(error);
            }
        }
    </script>
</body>
</html>